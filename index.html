<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>COD4 Progress Tracker</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    background: #0d0d0d;
    color: #eee;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
  }

  .container {
    display: flex;
    gap: 50px;
    max-width: 1100px;
    width: 100%;
    flex-wrap: wrap;
  }

  .acts {
    display: flex;
    gap: 30px;
    flex-wrap: wrap;
  }

  .act {
    background: #1a1a1a;
    padding: 20px;
    border-radius: 8px;
    min-width: 230px;
  }

  h2 {
    margin-top: 0;
    color: #ffcc00;
    font-size: 1.2em;
    border-bottom: 1px solid #333;
    padding-bottom: 5px;
  }

  label {
    display: flex;
    align-items: center;
    cursor: pointer;
    margin: 8px 0;
  }

  input[type="checkbox"] {
    margin-right: 10px;
    width: 18px;
    height: 18px;
    accent-color: #ffcc00;
    cursor: pointer;
  }

  .stats {
    background: #1a1a1a;
    padding: 20px;
    border-radius: 8px;
    min-width: 200px;
    height: fit-content;
  }

  .percent {
    font-size: 1.1em;
    margin-bottom: 10px;
  }

  hr {
    border: 1px solid #333;
    margin: 10px 0;
  }
</style>
</head>
<body>

<div class="container">
  <div class="acts">

    <div class="act" data-act="prologue">
      <h2>Prologue</h2>
      <label><input type="checkbox" data-id="prologue-1"> F.N.G. (Training)</label>
      <label><input type="checkbox" data-id="prologue-2"> Crew Expendable</label>
      <label><input type="checkbox" data-id="prologue-3" disabled> The Coup (Can't do anything)</label>
    </div>

    <div class="act" data-act="act1">
      <h2>Act I</h2>
      <label><input type="checkbox" data-id="act1-1"> Blackout</label>
      <label><input type="checkbox" data-id="act1-2"> Charlie Donâ€™t Surf</label>
      <label><input type="checkbox" data-id="act1-3"> The Bog</label>
      <label><input type="checkbox" data-id="act1-4"> Hunted</label>
      <label><input type="checkbox" data-id="act1-5"> Death From Above</label>
      <label><input type="checkbox" data-id="act1-6"> War Pig</label>
      <label><input type="checkbox" data-id="act1-7"> Shock and Awe</label>
      <label><input type="checkbox" data-id="act1-8" disabled> Aftermath (Nuclear Ending)</label>
    </div>

    <div class="act" data-act="act2">
      <h2>Act II</h2>
      <label><input type="checkbox" data-id="act2-1"> Safehouse</label>
      <label><input type="checkbox" data-id="act2-2"> All Ghillied Up (Chernobyl)</label>
      <label><input type="checkbox" data-id="act2-3"> One Shot, One Kill (Chernobyl)</label>
      <label><input type="checkbox" data-id="act2-4"> Heat</label>
      <label><input type="checkbox" data-id="act2-5"> The Sins of the Father</label>
    </div>

    <div class="act" data-act="act3">
      <h2>Act III</h2>
      <label><input type="checkbox" data-id="act3-1"> Ultimatum</label>
      <label><input type="checkbox" data-id="act3-2"> All In</label>
      <label><input type="checkbox" data-id="act3-3"> No Fighting in the War Room</label>
      <label><input type="checkbox" data-id="act3-4"> Game Over</label>
    </div>

    <div class="act" data-act="epilogue">
      <h2>Epilogue</h2>
      <label><input type="checkbox" data-id="epilogue-1"> Mile High Club (Bonus)</label>
    </div>

  </div>

  <div class="stats">
    <h2>Progress</h2>
    <div class="percent" id="prologue">Prologue: 0%</div>
    <div class="percent" id="act1">Act I: 0%</div>
    <div class="percent" id="act2">Act II: 0%</div>
    <div class="percent" id="act3">Act III: 0%</div>
    <div class="percent" id="epilogue">Epilogue: 0%</div>
    <hr>
    <div class="percent" id="total"><strong>Total: 0%</strong></div>
  </div>
</div>

<script>
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');

  function saveProgress() {
    checkboxes.forEach(box => {
      localStorage.setItem(box.dataset.id, box.checked);
    });
  }

  function loadProgress() {
    checkboxes.forEach(box => {
      const saved = localStorage.getItem(box.dataset.id);
      if (saved === 'true') box.checked = true;
      else if (saved === 'false') box.checked = false;
    });
    updateProgress();
  }

  function updateProgress() {
    const sections = document.querySelectorAll('.act');
    let totalChecked = 0;
    let totalMissions = 0;

    sections.forEach(section => {
      const boxes = section.querySelectorAll('input[type="checkbox"]:not([disabled])');
      const checked = [...boxes].filter(b => b.checked).length;
      const total = boxes.length;
      const sectionId = section.dataset.act;
      const percent = Math.round((checked / total) * 100) || 0;

      document.getElementById(sectionId).textContent =
        `${section.querySelector('h2').textContent}: ${percent}%`;

      totalChecked += checked;
      totalMissions += total;
    });

    const totalPercent = Math.round((totalChecked / totalMissions) * 100) || 0;
    document.getElementById('total').textContent = `Total: ${totalPercent}%`;
  }

  checkboxes.forEach(box => box.addEventListener('change', () => {
    updateProgress();
    saveProgress();
  }));

  loadProgress();
</script>

</body>
</html>
